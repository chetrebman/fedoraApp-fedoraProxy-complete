<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_22) on Mon Jul 23 16:29:30 MDT 2012 -->
<TITLE>
IngestWorker
</TITLE>

<META NAME="date" CONTENT="2012-07-23">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IngestWorker";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/IngestWorker.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerFactory.html" title="class in edu.du.penrose.systems.fedoraApp.tasks"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="IngestWorker.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
edu.du.penrose.systems.fedoraApp.tasks</FONT>
<BR>
Class IngestWorker</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../resources/inherit.gif" ALT="extended by "><B>edu.du.penrose.systems.fedoraApp.tasks.IngestWorker</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>IngestWorker</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A></DL>
</PRE>

<P>
Worker to run a batch ingest thread <br>
 <br>
 A batch ingest runs as background thread, the final report email's and the rest response will not be performed until 
 the NEXT time this timer routine is called. Upon completion of the rest response and the e-mailing of the reports, the 
 reports are moved from tasksTemp folder to the normal logs folder. The email's can be disabled in 'batchSet'.properties file.
 <br><br>
 Batch files are processed in the following order...<br>
 1) We look to see if a task exists and is currently running, if one is, no action is performed.<br>
 2) If a task exists and has completed, email reports and rest calls are performed, then files are moved to completed folders<br>
 3) If any reports exist in the taskTemp directories (due to a previous error), email reports and rest calls are performed, 
 then files are moved to completed folders and task is deleted.<br>
 4) batchIngest.xml files are located in the work folder, in no particular order the are ALL split into the mets/new and mets/updates
 Folders. An Ingest task is started which will process ALL files in the new and update folders, even if they were not in the 
 batchIngest.xml file. <br>
 5) If no ingest task is started, we look for orphaned files in the mets/new and mets/update folders (due to previous errors).
 An ingest task is started that will process ALL files in the new and updates folders. <br>
 
 NOTE: All batchIngest files in the work queue are processed (split), not one at a time. 
 NOTE: The report,pid report log files are not deleted. 
 NOTE: If the email addresses are empty in the batchIngest.properties file, no email's are sent, but the rest response is sent and
 reports are moved upon completion as normal.
 NOTE: Files will appear in the taskTemp directory when a batch ingest Thread is processing a batchIngest.xml file in 
 the work directory OR you are processing left over files in the mets/new or mets/update directories.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Chet</DD>
</DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#batchSet">batchSet</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#FAILURE_EMAIL_FROM_ADDRESS">FAILURE_EMAIL_FROM_ADDRESS</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#fedoraContext">fedoraContext</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#institution">institution</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#IngestWorker(java.lang.String)">IngestWorker</A></B>(java.lang.String&nbsp;batchName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#doWork()">doWork</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#emailResults(java.lang.String[])">emailResults</A></B>(java.lang.String[]&nbsp;filesToMail)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email the pid and results file, if they do not exist, empty ones are created.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#getName()">getName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.util.Set&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#getRemoteConfiguredInstitutions()">getRemoteConfiguredInstitutions</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns strings of the type 'institution'_'batchSet' ie 'codu_ectd' to show the institution and batch set for batch sets that have been
 configured for remote ingest's, they may or not be enabled in the taskEnableProperties file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#isHasRemoteIngestPropertiesFile(java.lang.String)">isHasRemoteIngestPropertiesFile</A></B>(java.lang.String&nbsp;batchSetName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;<A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/BatchIngestOptions.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.data">BatchIngestOptions</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#loadIngestOptions(java.lang.String, java.lang.String)">loadIngestOptions</A></B>(java.lang.String&nbsp;myInstitution,
                  java.lang.String&nbsp;myBatchSet)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#performRemoteRestResponse(java.lang.String[], java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)">performRemoteRestResponse</A></B>(java.lang.String[]&nbsp;results,
                          java.lang.String&nbsp;batchSetName,
                          java.lang.String&nbsp;restReplyHost,
                          java.lang.String&nbsp;restReplyPort,
                          java.lang.String&nbsp;restReplyPidCmd,
                          java.lang.String&nbsp;restReplyKey)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After successful ingest call back to calling application for EACH PID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#sendFailureEmail(java.lang.String)">sendFailureEmail</A></B>(java.lang.String&nbsp;errorMsg)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#setName(java.lang.String)">setName</A></B>(java.lang.String&nbsp;workerName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html#tryToStartNewBatchThread()">tryToStartNewBatchThread</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Make sure no batch is running, if one has just completed clean up any unprocessed reports (including sending the rest response) 
 then try to start a new batch.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="FAILURE_EMAIL_FROM_ADDRESS"><!-- --></A><H3>
FAILURE_EMAIL_FROM_ADDRESS</H3>
<PRE>
public java.lang.String <B>FAILURE_EMAIL_FROM_ADDRESS</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="institution"><!-- --></A><H3>
institution</H3>
<PRE>
public java.lang.String <B>institution</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="batchSet"><!-- --></A><H3>
batchSet</H3>
<PRE>
public java.lang.String <B>batchSet</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="fedoraContext"><!-- --></A><H3>
fedoraContext</H3>
<PRE>
public final java.lang.String <B>fedoraContext</B></PRE>
<DL>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../../../constant-values.html#edu.du.penrose.systems.fedoraApp.tasks.IngestWorker.fedoraContext">Constant Field Values</A></DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="IngestWorker(java.lang.String)"><!-- --></A><H3>
IngestWorker</H3>
<PRE>
public <B>IngestWorker</B>(java.lang.String&nbsp;batchName)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getRemoteConfiguredInstitutions()"><!-- --></A><H3>
getRemoteConfiguredInstitutions</H3>
<PRE>
public static java.util.Set&lt;java.lang.String&gt; <B>getRemoteConfiguredInstitutions</B>()
                                                                       throws java.lang.Exception</PRE>
<DL>
<DD>Returns strings of the type 'institution'_'batchSet' ie 'codu_ectd' to show the institution and batch set for batch sets that have been
 configured for remote ingest's, they may or not be enabled in the taskEnableProperties file.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>string of type 'codu_ectd'
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="isHasRemoteIngestPropertiesFile(java.lang.String)"><!-- --></A><H3>
isHasRemoteIngestPropertiesFile</H3>
<PRE>
public static boolean <B>isHasRemoteIngestPropertiesFile</B>(java.lang.String&nbsp;batchSetName)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>batchSetName</CODE> - accepts a batchSetName of type institution_batchSet_REMOTE.
 To be remote enabled a batchSet must have a batchSet_REMOTE.properites file.
 NOTE: the task may or may not be enabled in the taskEnable.properties. This method does
 not check the askEnable.properties file.
<DT><B>Returns:</B><DD>true if there is a file containing remote ingest options</DL>
</DD>
</DL>
<HR>

<A NAME="doWork()"><!-- --></A><H3>
doWork</H3>
<PRE>
public void <B>doWork</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html#doWork()">doWork</A></CODE> in interface <CODE><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="tryToStartNewBatchThread()"><!-- --></A><H3>
tryToStartNewBatchThread</H3>
<PRE>
public boolean <B>tryToStartNewBatchThread</B>()</PRE>
<DL>
<DD>Make sure no batch is running, if one has just completed clean up any unprocessed reports (including sending the rest response) 
 then try to start a new batch.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>true of a new thread was started</DL>
</DD>
</DL>
<HR>

<A NAME="loadIngestOptions(java.lang.String, java.lang.String)"><!-- --></A><H3>
loadIngestOptions</H3>
<PRE>
public static <A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/BatchIngestOptions.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.data">BatchIngestOptions</A> <B>loadIngestOptions</B>(java.lang.String&nbsp;myInstitution,
                                                   java.lang.String&nbsp;myBatchSet)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>myInstitution</CODE> - of type 'codu'<DD><CODE>myBatchSet</CODE> - of type 'ectd'
<DT><B>Returns:</B><DD>options for this batchSet</DL>
</DD>
</DL>
<HR>

<A NAME="emailResults(java.lang.String[])"><!-- --></A><H3>
emailResults</H3>
<PRE>
public void <B>emailResults</B>(java.lang.String[]&nbsp;filesToMail)
                  throws java.lang.Exception</PRE>
<DL>
<DD>Email the pid and results file, if they do not exist, empty ones are created.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>filesToMail</CODE> - [0] is the ingest report; [1] is the pid report.
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="sendFailureEmail(java.lang.String)"><!-- --></A><H3>
sendFailureEmail</H3>
<PRE>
public void <B>sendFailureEmail</B>(java.lang.String&nbsp;errorMsg)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getName()"><!-- --></A><H3>
getName</H3>
<PRE>
public java.lang.String <B>getName</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html#getName()">getName</A></CODE> in interface <CODE><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setName(java.lang.String)"><!-- --></A><H3>
setName</H3>
<PRE>
public <A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A> <B>setName</B>(java.lang.String&nbsp;workerName)</PRE>
<DL>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html#setName(java.lang.String)">setName</A></CODE> in interface <CODE><A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerInf.html" title="interface in edu.du.penrose.systems.fedoraApp.tasks">WorkerInf</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="performRemoteRestResponse(java.lang.String[], java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String)"><!-- --></A><H3>
performRemoteRestResponse</H3>
<PRE>
public static void <B>performRemoteRestResponse</B>(java.lang.String[]&nbsp;results,
                                             java.lang.String&nbsp;batchSetName,
                                             java.lang.String&nbsp;restReplyHost,
                                             java.lang.String&nbsp;restReplyPort,
                                             java.lang.String&nbsp;restReplyPidCmd,
                                             java.lang.String&nbsp;restReplyKey)
                                      throws java.lang.Exception</PRE>
<DL>
<DD>After successful ingest call back to calling application for EACH PID. There is currently no rest response for updates. If the pid report 
 is empty(due to an error) no REST response will be performed
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>results</CODE> - results [0] is the ingest report. [1] is the pid report.<DD><CODE>batchSetName</CODE> - is of type 'ectd'<DD><CODE>restReplyHost</CODE> - if null or empty we return<DD><CODE>restReplyPort</CODE> - if null or empty we return<DD><CODE>restReplyPidCmd</CODE> - <DD><CODE>restReplyKey</CODE> - 
<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/IngestWorker.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../../edu/du/penrose/systems/fedoraApp/tasks/WorkerFactory.html" title="class in edu.du.penrose.systems.fedoraApp.tasks"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?edu/du/penrose/systems/fedoraApp/tasks/IngestWorker.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="IngestWorker.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
