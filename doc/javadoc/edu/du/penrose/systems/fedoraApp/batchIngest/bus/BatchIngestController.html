<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_05) on Thu Aug 21 10:04:09 MDT 2008 -->
<TITLE>
BatchIngestController
</TITLE>

<META NAME="date" CONTENT="2008-08-21">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BatchIngestController";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BatchIngestController.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestThreadHolder.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.bus"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../../index.html?edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BatchIngestController.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_classes_inherited_from_class_java.lang.Thread">NESTED</A>&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_java.lang.Thread">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
edu.du.penrose.systems.fedoraApp.batchIngest.bus</FONT>
<BR>
Class BatchIngestController</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../../../../resources/inherit.gif" ALT="extended by ">java.lang.Thread
      <IMG SRC="../../../../../../../resources/inherit.gif" ALT="extended by "><B>edu.du.penrose.systems.fedoraApp.batchIngest.bus.BatchIngestController</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD>java.lang.Runnable</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>BatchIngestController</B><DT>extends java.lang.Thread</DL>
</PRE>

<P>
Main controller/thread for performing a  single Fedora 'batch set' ingest. 
 This objectis meant to be run in a thread as background process. Methods are 
 provided to query the thread about the batch ingest such as status, number of 
 files completed, number of files failed etc.
 
 <br>
 <br>
 NOTE: This class is NOT Thread safe! You need start a new thread for each 
 batch set.
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>chet.rebman</DD>
<DT><B>See Also:</B><DD><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/package-summary.html"><CODE>edu.du.penrose.systems.fedoraApp.batchIngest.bus</CODE></A>, 
<A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestThreadHolder.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.bus"><CODE>BatchIngestThreadHolder</CODE></A>, 
<A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestThreadManager.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.bus"><CODE>BatchIngestThreadManager</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="nested_classes_inherited_from_class_java.lang.Thread"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Nested classes/interfaces inherited from class java.lang.Thread</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>java.lang.Thread.State, java.lang.Thread.UncaughtExceptionHandler</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_java.lang.Thread"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class java.lang.Thread</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>MAX_PRIORITY, MIN_PRIORITY, NORM_PRIORITY</CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#BatchIngestController(edu.du.penrose.systems.fedora.client.Administrator, edu.du.penrose.systems.fedoraApp.batchIngest.data.TransformMetaData, java.lang.String, java.lang.String, java.lang.String, edu.du.penrose.systems.fedoraApp.batchIngest.data.BatchIngestOptions)">BatchIngestController</A></B>(<A HREF="../../../../../../../edu/du/penrose/systems/fedora/client/Administrator.html" title="class in edu.du.penrose.systems.fedora.client">Administrator</A>&nbsp;administrator,
                      <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/TransformMetaData.html" title="interface in edu.du.penrose.systems.fedoraApp.batchIngest.data">TransformMetaData</A>&nbsp;XSLTransformer,
                      java.lang.String&nbsp;institution,
                      java.lang.String&nbsp;batch_set,
                      java.lang.String&nbsp;fedoraContext,
                      <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/BatchIngestOptions.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.data">BatchIngestOptions</A>&nbsp;batchOptions)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create a new BatchIngestController for an individual batch set.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#forceHardStop()">forceHardStop</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Close the files and stop a batch ingest, without waiting for the current operation
 to finish.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getBatch_set()">getBatch_set</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the name of this batch set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/BatchIngestURLhandler.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.data">BatchIngestURLhandler</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getBatchURLhandler()">getBatchURLhandler</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A convenience method to obtain the applications URL handler which has all
 of the folder locations used by the bastch ingest application.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getCurrentCompleted()">getCurrentCompleted</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the runtime statistic of the number files that have been ingested
 so far.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getCurrentFailed()">getCurrentFailed</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return the runtime statistic of the number files that have failed so far 
 during the ingest.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getHaltCommand()">getHaltCommand</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check if the thread is set to stop after current file (and PCOs) are 
 ingested into Fedora.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getHandle(java.lang.String)">getHandle</A></B>(java.lang.String&nbsp;pid)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Connects with the ADR and requests a handle be assigned from handle.net 
 for a specific PID.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getInstitution()">getInstitution</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the instituion name for this batch set This is used in reports and 
 to locate the batch set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getOBJIDfromMets(org.jdom.Document)">getOBJIDfromMets</A></B>(org.jdom.Document&nbsp;metsDocument)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the OBJID from the METS element.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#getUniqueBatchRunName(java.lang.String, java.lang.String)">getUniqueBatchRunName</A></B>(java.lang.String&nbsp;institution,
                      java.lang.String&nbsp;batchSet)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The unqiue name for this batch set run.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#isDone()">isDone</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Return runtime status of thread.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#run()">run</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Start the batch ingest thread running.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#runBatch()">runBatch</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The main program that performs the Fedora batch ingest.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#setBatch_set(java.lang.String)">setBatch_set</A></B>(java.lang.String&nbsp;batch_set)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the name of this batch set.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#setHaltCommand(boolean)">setHaltCommand</A></B>(boolean&nbsp;haltThread)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the halt command.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html#setInstitution(java.lang.String)">setInstitution</A></B>(java.lang.String&nbsp;institution)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set the instituion name for this batch set.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Thread"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Thread</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>activeCount, checkAccess, countStackFrames, currentThread, destroy, dumpStack, enumerate, getAllStackTraces, getContextClassLoader, getDefaultUncaughtExceptionHandler, getId, getName, getPriority, getStackTrace, getState, getThreadGroup, getUncaughtExceptionHandler, holdsLock, interrupt, interrupted, isAlive, isDaemon, isInterrupted, join, join, join, resume, setContextClassLoader, setDaemon, setDefaultUncaughtExceptionHandler, setName, setPriority, setUncaughtExceptionHandler, sleep, sleep, start, stop, stop, suspend, toString, yield</CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="BatchIngestController(edu.du.penrose.systems.fedora.client.Administrator, edu.du.penrose.systems.fedoraApp.batchIngest.data.TransformMetaData, java.lang.String, java.lang.String, java.lang.String, edu.du.penrose.systems.fedoraApp.batchIngest.data.BatchIngestOptions)"><!-- --></A><H3>
BatchIngestController</H3>
<PRE>
public <B>BatchIngestController</B>(<A HREF="../../../../../../../edu/du/penrose/systems/fedora/client/Administrator.html" title="class in edu.du.penrose.systems.fedora.client">Administrator</A>&nbsp;administrator,
                             <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/TransformMetaData.html" title="interface in edu.du.penrose.systems.fedoraApp.batchIngest.data">TransformMetaData</A>&nbsp;XSLTransformer,
                             java.lang.String&nbsp;institution,
                             java.lang.String&nbsp;batch_set,
                             java.lang.String&nbsp;fedoraContext,
                             <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/BatchIngestOptions.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.data">BatchIngestOptions</A>&nbsp;batchOptions)
                      throws <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/exceptions/FatalException.html" title="class in edu.du.penrose.systems.fedoraApp.exceptions">FatalException</A></PRE>
<DL>
<DD>Create a new BatchIngestController for an individual batch set.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>administrator</CODE> - Gives acces to fedora SOAP stubs and Fedora APIs.<DD><CODE>XSLTransformer</CODE> - Performs the XSLT to transform input XML to FOXML.<DD><CODE>institution</CODE> - The instituion name for the batch set.<DD><CODE>batch_set</CODE> - The name of this batch set (Used to name reports).<DD><CODE>fedoraContext</CODE> - The context used by fedora when creating the fedora 
 objects unique identifier (PID) This context must already be known by 
 fedora (specified in fedora.fcfg)<DD><CODE>batchOptions</CODE> - Options for running this batch set (in a web environment
 this is obtained from a web form)
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/exceptions/FatalException.html" title="class in edu.du.penrose.systems.fedoraApp.exceptions">FatalException</A></CODE> - thrown to stop execution of batch set.</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getUniqueBatchRunName(java.lang.String, java.lang.String)"><!-- --></A><H3>
getUniqueBatchRunName</H3>
<PRE>
public static java.lang.String <B>getUniqueBatchRunName</B>(java.lang.String&nbsp;institution,
                                                     java.lang.String&nbsp;batchSet)</PRE>
<DL>
<DD>The unqiue name for this batch set run. This name is used for creating
 report and file name.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>institution</CODE> - institution for this batch set.<DD><CODE>batchSet</CODE> - the batch set name.
<DT><B>Returns:</B><DD>unique name containing the institution and batchset names.</DL>
</DD>
</DL>
<HR>

<A NAME="runBatch()"><!-- --></A><H3>
runBatch</H3>
<PRE>
public void <B>runBatch</B>()
              throws <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/exceptions/FatalException.html" title="class in edu.du.penrose.systems.fedoraApp.exceptions">FatalException</A></PRE>
<DL>
<DD>The main program that performs the Fedora batch ingest. After ingest we 
 check that the object is actually in Fedora with the PID Fedora supplied
 earlier, if it is not an Exception is thrown. 
 <br><br>
 NOTE; IF Fedora does not like the PID due to an invalid context, Fedora
 does not generate an error. An error will be generated after ingest when 
 we check that the object is in Fedora with the supplied PID. Therefore if
 you get an error on retrieving the object, the object may actually be in 
 Fedora in the 'changeme' context with a PID of type changeme:xxx.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.lang.Exception</CODE> - on any fatal error.
<DD><CODE><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/exceptions/FatalException.html" title="class in edu.du.penrose.systems.fedoraApp.exceptions">FatalException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentCompleted()"><!-- --></A><H3>
getCurrentCompleted</H3>
<PRE>
public int <B>getCurrentCompleted</B>()</PRE>
<DL>
<DD>Return the runtime statistic of the number files that have been ingested
 so far.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the number of files ingest so far.</DL>
</DD>
</DL>
<HR>

<A NAME="getCurrentFailed()"><!-- --></A><H3>
getCurrentFailed</H3>
<PRE>
public int <B>getCurrentFailed</B>()</PRE>
<DL>
<DD>Return the runtime statistic of the number files that have failed so far 
 during the ingest.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the number of files failed so far during ingest.</DL>
</DD>
</DL>
<HR>

<A NAME="run()"><!-- --></A><H3>
run</H3>
<PRE>
public void <B>run</B>()</PRE>
<DL>
<DD>Start the batch ingest thread running.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE>run</CODE> in interface <CODE>java.lang.Runnable</CODE><DT><B>Overrides:</B><DD><CODE>run</CODE> in class <CODE>java.lang.Thread</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isDone()"><!-- --></A><H3>
isDone</H3>
<PRE>
public boolean <B>isDone</B>()</PRE>
<DL>
<DD>Return runtime status of thread.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>if true the batch ingest is complete.</DL>
</DD>
</DL>
<HR>

<A NAME="setHaltCommand(boolean)"><!-- --></A><H3>
setHaltCommand</H3>
<PRE>
public void <B>setHaltCommand</B>(boolean&nbsp;haltThread)</PRE>
<DL>
<DD>Set the halt command. If the halt command is true at the time of the next
 file ingest the batch thread will exit.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>haltThread</CODE> - true to stop ingest.</DL>
</DD>
</DL>
<HR>

<A NAME="getHaltCommand()"><!-- --></A><H3>
getHaltCommand</H3>
<PRE>
public boolean <B>getHaltCommand</B>()</PRE>
<DL>
<DD>Check if the thread is set to stop after current file (and PCOs) are 
 ingested into Fedora.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if set to halt after next ingest.</DL>
</DD>
</DL>
<HR>

<A NAME="getOBJIDfromMets(org.jdom.Document)"><!-- --></A><H3>
getOBJIDfromMets</H3>
<PRE>
public java.lang.String <B>getOBJIDfromMets</B>(org.jdom.Document&nbsp;metsDocument)</PRE>
<DL>
<DD>Get the OBJID from the METS element. The OBJOD is set by the provider of
 the METS withing the original XML file.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>metsDocument</CODE> - 
<DT><B>Returns:</B><DD>the OBJID vaule in the METS document.</DL>
</DD>
</DL>
<HR>

<A NAME="getHandle(java.lang.String)"><!-- --></A><H3>
getHandle</H3>
<PRE>
public static boolean <B>getHandle</B>(java.lang.String&nbsp;pid)
                         throws <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/exceptions/FatalException.html" title="class in edu.du.penrose.systems.fedoraApp.exceptions">FatalException</A></PRE>
<DL>
<DD>Connects with the ADR and requests a handle be assigned from handle.net 
 for a specific PID. Note: we never receive the actual handle.
 <br><br>
 NOTE: Looks for BATCH_INGEST_DISABLE_GET_HANDLE in the application 
 propertites file, if set return true without attempting to obtain a
 handle.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pid</CODE> - 
<DT><B>Returns:</B><DD>true if a handle was assigned
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/exceptions/FatalException.html" title="class in edu.du.penrose.systems.fedoraApp.exceptions">FatalException</A></CODE> - if unable to assign handle.<DT><B>See Also:</B><DD><A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/Constants.html#BATCH_INGEST_DISABLE_GET_HANDLE_PROPERTY"><CODE>Constants.BATCH_INGEST_DISABLE_GET_HANDLE_PROPERTY</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="getInstitution()"><!-- --></A><H3>
getInstitution</H3>
<PRE>
public java.lang.String <B>getInstitution</B>()</PRE>
<DL>
<DD>Get the instituion name for this batch set This is used in reports and 
 to locate the batch set.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setInstitution(java.lang.String)"><!-- --></A><H3>
setInstitution</H3>
<PRE>
public void <B>setInstitution</B>(java.lang.String&nbsp;institution)</PRE>
<DL>
<DD>Set the instituion name for this batch set. This is used in reports and 
 to locate the batch set.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>institution</CODE> - the institution to set</DL>
</DD>
</DL>
<HR>

<A NAME="getBatch_set()"><!-- --></A><H3>
getBatch_set</H3>
<PRE>
public java.lang.String <B>getBatch_set</B>()</PRE>
<DL>
<DD>Return the name of this batch set. This is used in reports and to locate
 the batch set.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the batch_set</DL>
</DD>
</DL>
<HR>

<A NAME="setBatch_set(java.lang.String)"><!-- --></A><H3>
setBatch_set</H3>
<PRE>
public void <B>setBatch_set</B>(java.lang.String&nbsp;batch_set)</PRE>
<DL>
<DD>Set the name of this batch set. This is used in reports and to locate
 the batch set.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>batch_set</CODE> - the batch_set to set</DL>
</DD>
</DL>
<HR>

<A NAME="getBatchURLhandler()"><!-- --></A><H3>
getBatchURLhandler</H3>
<PRE>
public <A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/data/BatchIngestURLhandler.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.data">BatchIngestURLhandler</A> <B>getBatchURLhandler</B>()</PRE>
<DL>
<DD>A convenience method to obtain the applications URL handler which has all
 of the folder locations used by the bastch ingest application.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the batchURLhandler</DL>
</DD>
</DL>
<HR>

<A NAME="forceHardStop()"><!-- --></A><H3>
forceHardStop</H3>
<PRE>
public void <B>forceHardStop</B>()</PRE>
<DL>
<DD>Close the files and stop a batch ingest, without waiting for the current operation
 to finish.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/BatchIngestController.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../../../../../../../edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestThreadHolder.html" title="class in edu.du.penrose.systems.fedoraApp.batchIngest.bus"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../../index.html?edu/du/penrose/systems/fedoraApp/batchIngest/bus/BatchIngestController.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="BatchIngestController.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_classes_inherited_from_class_java.lang.Thread">NESTED</A>&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_java.lang.Thread">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
